{
  "name": "zokuzoku",
  "displayName": "%extension.displayName%",
  "publisher": "LeadRDRK",
  "description": "%extension.description%",
  "repository": {
    "url": "https://github.com/Hachimi-Hachimi/ZokuZoku"
  },
  "version": "0.4.1",
  "engines": {
    "vscode": "^1.90.0"
  },
  "categories": [
    "Other"
  ],
  "icon": "assets/icon.png",
  "activationEvents": [
    "workspaceContains:localized_data/config.json"
  ],
  "main": "./out/extension.js",
  "l10n": "./l10n",
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "zokuzoku",
          "title": "%activitybar.zokuzoku.title%",
          "icon": "assets/activity_bar_icon.svg"
        }
      ]
    },
    "views": {
      "zokuzoku": [
        {
          "id": "inactive",
          "name": "%view.inactive.name%",
          "when": "!zokuzoku.active"
        },
        {
          "id": "stories",
          "name": "%view.stories.name%",
          "visibility": "collapsed",
          "when": "zokuzoku.active"
        },
        {
          "id": "home-stories",
          "name": "%view.homeStories.name%",
          "visibility": "collapsed",
          "when": "zokuzoku.active"
        },
        {
          "id": "main-stories",
          "name": "%view.mainStories.name%",
          "visibility": "collapsed",
          "when": "zokuzoku.active"
        },
        {
          "id": "localize-dict",
          "name": "%view.localizeDict.name%",
          "visibility": "collapsed",
          "when": "zokuzoku.active"
        },
        {
          "id": "mdb",
          "name": "%view.mdb.name%",
          "visibility": "collapsed",
          "when": "zokuzoku.active"
        },
        {
          "id": "lyrics",
          "name": "%view.lyrics.name%",
          "visibility": "collapsed",
          "when": "zokuzoku.active"
        },
        {
          "id": "hachimi-controls",
          "name": "%view.hachimiControls.name%",
          "visibility": "collapsed",
          "when": "zokuzoku.active"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "inactive",
        "contents": "%welcome.inactive%"
      },
      {
        "view": "localize-dict",
        "contents": "%welcome.localizeDict%"
      },
      {
        "view": "hachimi-controls",
        "contents": "%welcome.hachimiControls%"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "zokuzoku.stories.refresh",
          "when": "view == stories",
          "group": "navigation"
        },
        {
          "command": "zokuzoku.homeStories.refresh",
          "when": "view == home-stories",
          "group": "navigation"
        },
        {
          "command": "zokuzoku.mainStories.refresh",
          "when": "view == main-stories",
          "group": "navigation"
        },
        {
          "command": "zokuzoku.lyrics.refresh",
          "when": "view == lyrics",
          "group": "navigation"
        }
      ]
    },
    "commands": [
      {
        "command": "zokuzoku.enable",
        "title": "%command.enable.title%"
      },
      {
        "command": "zokuzoku.openLocalizeDictEditor",
        "title": "%command.openLocalizeDictEditor.title%"
      },
      {
        "command": "zokuzoku.openLyricsEditor",
        "title": "%command.openLyricsEditor.title%"
      },
      {
        "command": "zokuzoku.openMdbEditor",
        "title": "%command.openMdbEditor.title%"
      },
      {
        "command": "zokuzoku.openRaceStoryEditor",
        "title": "%command.openRaceStoryEditor.title%"
      },
      {
        "command": "zokuzoku.openStoryEditor",
        "title": "%command.openStoryEditor.title%"
      },
      {
        "command": "zokuzoku.runAllAutomations",
        "title": "%command.runAllAutomations.title%"
      },
      {
        "command": "zokuzoku.runAutomation",
        "title": "%command.runAutomation.title%"
      },
      {
        "command": "zokuzoku.clearCache",
        "title": "%command.clearCache.title%"
      },
      {
        "command": "zokuzoku.hachimi.reloadLocalizedData",
        "title": "%command.hachimi.reloadLocalizedData.title%"
      },
      {
        "command": "zokuzoku.hachimi.setLocalizedDataDir",
        "title": "%command.hachimi.setLocalizedDataDir.title%"
      },
      {
        "command": "zokuzoku.hachimi.revertLocalizedDataDir",
        "title": "%command.hachimi.revertLocalizedDataDir.title%"
      },
      {
        "command": "zokuzoku.stories.refresh",
        "title": "%command.stories.refresh.title%",
        "icon": "$(refresh)"
      },
      {
        "command": "zokuzoku.homeStories.refresh",
        "title": "%command.homeStories.refresh.title%",
        "icon": "$(refresh)"
      },
      {
        "command": "zokuzoku.mainStories.refresh",
        "title": "%command.mainStories.refresh.title%",
        "icon": "$(refresh)"
      },
      {
        "command": "zokuzoku.lyrics.refresh",
        "title": "%command.lyrics.refresh.title%",
        "icon": "$(refresh)"
      }
    ],
    "customEditors": [
      {
        "viewType": "zokuzoku.localizeDictEditor",
        "displayName": "%customEditor.localizeDict.displayName%",
        "selector": [
          {
            "filenamePattern": "*.json"
          }
        ],
        "priority": "option"
      },
      {
        "viewType": "zokuzoku.lyricsEditor",
        "displayName": "%customEditor.lyrics.displayName%",
        "selector": [
          {
            "filenamePattern": "m????_lyrics.json"
          }
        ],
        "priority": "option"
      },
      {
        "viewType": "zokuzoku.mdbEditor",
        "displayName": "%customEditor.mdb.displayName%",
        "selector": [
          {
            "filenamePattern": "{text_data,character_system_text,race_jikkyo_comment,race_jikkyo_message}*.json"
          }
        ],
        "priority": "option"
      },
      {
        "viewType": "zokuzoku.raceStoryEditor",
        "displayName": "%customEditor.raceStory.displayName%",
        "selector": [
          {
            "filenamePattern": "storyrace_?????????.json"
          }
        ],
        "priority": "option"
      },
      {
        "viewType": "zokuzoku.storyEditor",
        "displayName": "%customEditor.story.displayName%",
        "selector": [
          {
            "filenamePattern": "{storytimeline_?????????.json,hometimeline_?????_??_???????.json}"
          }
        ],
        "priority": "option"
      }
    ],
    "configuration": {
      "title": "%extension.displayName%",
      "properties": {
        "zokuzoku.enabled": {
          "type": "boolean",
          "default": false,
          "description": "%config.enabled.description%"
        },
        "zokuzoku.gameDataDir": {
          "type": "string",
          "default": "",
          "scope": "machine",
          "description": "%config.gameDataDir.description%"
        },
        "zokuzoku.localizeDictDump": {
          "type": "string",
          "default": "",
          "scope": "machine",
          "description": "%config.localizeDictDump.description%"
        },
        "zokuzoku.autoDownloadBundles": {
          "type": "boolean",
          "default": true,
          "scope": "machine",
          "description": "%config.autoDownloadBundles.description%"
        },
        "zokuzoku.sqlite3": {
          "type": "string",
          "default": "sqlite3",
          "description": "%config.sqlite3.description%"
        },
        "zokuzoku.useGameFont": {
          "type": "boolean",
          "default": true,
          "description": "%config.useGameFont.description%"
        },
        "zokuzoku.customFont": {
          "type": "string",
          "default": "",
          "scope": "machine",
          "description": "%config.customFont.description%"
        },
        "zokuzoku.hachimiIpcAddress": {
          "type": "string",
          "default": "127.0.0.1",
          "scope": "machine",
          "description": "%config.hachimiIpcAddress.description%"
        },
        "zokuzoku.decryption.enabled": {
          "type": "boolean",
          "default": true,
          "description": "%config.decryption.description%"
        },
        "zokuzoku.decryption.metaKey": {
          "type": "string",
          "default": "",
          "description": "%config.decryptionMetakey.description%",
          "format": "password"
        },
        "zokuzoku.showTranslatedCharacterNames": {
          "type": "boolean",
          "default": true,
          "description": "%config.showTranslatedCharacterNames.description%"
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "pnpm run compile",
    "compile": "pnpm run wv:build && node build.mjs",
    "watch": "run-p wv:watch ts:watch",
    "lint": "eslint src --ext ts",
    "package": "vsce package --no-dependencies",
    "wv:build": "cd webviews && pnpm run build",
    "wv:watch": "cd webviews && pnpm run build --watch",
    "ts:watch": "tsc -watch -p ./",
    "l10n:export": "node scripts/extract-l10n.mjs"
  },
  "devDependencies": {
    "@types/follow-redirects": "^1.14.4",
    "@types/json-to-ast": "^2.1.4",
    "@types/mocha": "^10.0.6",
    "@types/node": "20.x",
    "@types/tar": "^6.1.13",
    "@types/vscode": "^1.88.0",
    "@typescript-eslint/eslint-plugin": "^8.14.0",
    "@typescript-eslint/parser": "^8.14.0",
    "@vscode/l10n-dev": "^0.0.35",
    "@vscode/vsce": "^3.2.1",
    "esbuild": "^0.24.0",
    "esbuild-plugin-copy": "^2.1.1",
    "eslint": "^9.15.0",
    "glob": "^13.0.0",
    "http-proxy-agent": "^7.0.2",
    "npm-run-all": "^4.1.5",
    "typescript": "^5.6.3"
  },
  "dependencies": {
    "cricodecs": "^1.0.2",
    "csv-parse": "^5.5.5",
    "csv-parser": "^2.3.5",
    "follow-redirects": "^1.15.6",
    "json-to-ast": "^2.1.0",
    "pymport": "1.6.0-rc.2",
    "tar": "^6.2.1"
  }
}
